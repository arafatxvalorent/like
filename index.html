<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow">
    <title>Password Protected Page</title>
    <style>
        html, body {
            margin: 0;
            width: 100%;
            height: 100%;
            font-family: Arial, Helvetica, sans-serif;
        }
        #dialogText {
            color: white;
            background-color: #333333;
        }
        
        #dialogWrap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: table;
            background-color: #EEEEEE;
        }
        
        #dialogWrapCell {
            display: table-cell;
            text-align: center;
            vertical-align: middle;
        }
        
        #mainDialog {
            max-width: 400px;
            margin: 5px;
            border: solid #AAAAAA 1px;
            border-radius: 10px;
            box-shadow: 3px 3px 5px 3px #AAAAAA;
            margin-left: auto;
            margin-right: auto;
            background-color: #FFFFFF;
            overflow: hidden;
            text-align: left;
        }
        #mainDialog > * {
            padding: 10px 30px;
        }
        #passArea {
            padding: 20px 30px;
            background-color: white;
        }
        #passArea > * {
            margin: 5px auto;
        }
        #pass {
            width: 100%;
            height: 40px;
            font-size: 30px;
        }
        
        #messageWrapper {
            float: left;
            vertical-align: middle;
            line-height: 30px;
        }
        
        .notifyText {
            display: none;
        }
        
        #invalidPass {
            color: red;
        }
        
        #success {
            color: green;
        }
        
        #submitPass {
            font-size: 20px;
            border-radius: 5px;
            background-color: #E7E7E7;
            border: solid gray 1px;
            float: right;
            cursor: pointer;
        }
        #contentFrame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        #attribution {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            padding: 10px;
            font-weight: bold;
            font-size: 0.8em;
        }
        #attribution, #attribution a {
            color: #999;
        }
        .error {
            display: none;
            color: red;
        }
    </style>
  </head>
  <body>
    <iframe id="contentFrame" frameBorder="0" allowfullscreen></iframe>
    <div id="dialogWrap">
        <div id="dialogWrapCell">
            <div id="mainDialog">
                <div id="dialogText">This page is password protected.</div>
                <div id="passArea">
                    <p id="passwordPrompt">Password</p>
                    <input id="pass" type="password" name="pass" autofocus>
                    <div>
                        <span id="messageWrapper">
                            <span id="invalidPass" class="error">Sorry, please try again.</span>
                            <span id="trycatcherror" class="error">Sorry, something went wrong.</span>
                            <span id="success" class="notifyText">Success!</span>
                            &nbsp;
                        </span>
                        <button id="submitPass" type="button">Submit</button>
                        <div style="clear: both;"></div>
                    </div>
                </div>
                <div id="securecontext" class="error">
                    <p>
                        Sorry, but password protection only works over a secure connection. Please load this page via HTTPS.
                    </p>
                </div>
                <div id="nocrypto" class="error">
                    <p>
                        Your web browser appears to be outdated. Please visit this page using a modern browser.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div id="attribution">
        Protected by <a href="https://www.maxlaumeister.com/pagecrypt/">PageCrypt</a>
    </div>
    <script>
    (function() {

        var pl = "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";
        
        var submitPass = document.getElementById('submitPass');
        var passEl = document.getElementById('pass');
        var invalidPassEl = document.getElementById('invalidPass');
        var trycatcherror = document.getElementById('trycatcherror');
        var successEl = document.getElementById('success');
        var contentFrame = document.getElementById('contentFrame');
        
        // Sanity checks

        if (pl === "") {
            submitPass.disabled = true;
            passEl.disabled = true;
            alert("This page is meant to be used with the encryption tool. It doesn't work standalone.");
            return;
        }

        if (!isSecureContext) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#securecontext").style.display = "block";
            return;
        }

        if (!crypto.subtle) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#nocrypto").style.display = "block";
            return;
        }
        
        function str2ab(str) {
            var ustr = atob(str);
            var buf = new ArrayBuffer(ustr.length);
            var bufView = new Uint8Array(buf);
            for (var i=0, strLen=ustr.length; i < strLen; i++) {
                bufView[i] = ustr.charCodeAt(i);
            }
            return bufView;
        }

        async function deriveKey(salt, password) {
            const encoder = new TextEncoder()
            const baseKey = await crypto.subtle.importKey(
                'raw',
                encoder.encode(password),
                'PBKDF2',
                false,
                ['deriveKey'],
            )
            return await crypto.subtle.deriveKey(
                { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },
                baseKey,
                { name: 'AES-GCM', length: 256 },
                true,
                ['decrypt'],
            )
        }
        
        async function doSubmit(evt) {
            submitPass.disabled = true;
            passEl.disabled = true;

            let iv, ciphertext, key;
            
            try {
                var unencodedPl = str2ab(pl);

                const salt = unencodedPl.slice(0, 32)
                iv = unencodedPl.slice(32, 32 + 16)
                ciphertext = unencodedPl.slice(32 + 16)

                key = await deriveKey(salt, passEl.value);
            } catch (e) {
                trycatcherror.style.display = "inline";
                console.error(e);
                return;
            }

            try {
                const decryptedArray = new Uint8Array(
                    await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, key, ciphertext)
                );

                let decrypted = new TextDecoder().decode(decryptedArray);

                if (decrypted === "") throw "No data returned";

                const basestr = '<base href="." target="_top">';
                const anchorfixstr = `
                    <script>
                        Array.from(document.links).forEach((anchor) => {
                            const href = anchor.getAttribute("href");
                            if (href.startsWith("#")) {
                                anchor.addEventListener("click", function(e) {
                                    e.preventDefault();
                                    const targetId = this.getAttribute("href").substring(1);
                                    const targetEl = document.getElementById(targetId);
                                    targetEl.scrollIntoView();
                                });
                            }
                        });
                    <\/script>
                `;
                
                // Set default iframe link targets to _top so all links break out of the iframe
                if (decrypted.includes("<head>")) decrypted = decrypted.replace("<head>", "<head>" + basestr);
                else if (decrypted.includes("<!DOCTYPE html>")) decrypted = decrypted.replace("<!DOCTYPE html>", "<!DOCTYPE html>" + basestr);
                else decrypted = basestr + decrypted;

                // Fix fragment links
                if (decrypted.includes("</body>")) decrypted = decrypted.replace("</body>", anchorfixstr + '</body>');
                else if (decrypted.includes("</html>")) decrypted = decrypted.replace("</html>", anchorfixstr + '</html>');
                else decrypted = decrypted + anchorfixstr;
                
                contentFrame.srcdoc = decrypted;
                
                successEl.style.display = "inline";
                setTimeout(function() {
                    dialogWrap.style.display = "none";
                }, 1000);
            } catch (e) {
                invalidPassEl.style.display = "inline";
                passEl.value = "";
                submitPass.disabled = false;
                passEl.disabled = false;
                console.error(e);
                return;
            }
        }
        
        submitPass.onclick = doSubmit;
        passEl.onkeypress = function(e){
            if (!e) e = window.event;
            var keyCode = e.keyCode || e.which;
            invalidPassEl.style.display = "none";
            if (keyCode == '13'){
              // Enter pressed
              doSubmit();
              return false;
            }
        }
    })();
    </script>
  </body>
</html>
